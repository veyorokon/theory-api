# pytest.ini (repo root)
[pytest]
addopts = -q --strict-markers
testpaths = tests

markers =
    unit: fast, hermetic tests (SQLite/no Docker)
    integration: cross-module tests (no external network)
    contracts: docs-as-contracts invariants
    property: property-based tests
    acceptance: end-to-end, docker-compose (hermetic)
    prlane: PR lane (build from source, mock, no secrets)
    supplychain: pinned artifacts only (no --build)
    modal: modal-adapter related tests
    requires_postgres: spins up postgres via compose
    requires_docker: requires Docker runtime
    requires_minio: spins up minio via compose
    deploy_smoke: post-deploy smoke verification
    ledger_acceptance: ledger acceptance tests
    staging: runs against staging env post-deploy

filterwarnings =
    ignore::DeprecationWarning
